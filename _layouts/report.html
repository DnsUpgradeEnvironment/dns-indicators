<!-- 1 --------------------------------------------------------------->
{% include head.html %}


{% assign reporting_data = site.data[page.language].reporting %}
{% assign goals = reporting_data.goals %}


<p>WÃ¤hlen Sie aus welche Indikatoren im Bericht enthalten sein sollen.</p>
{% assign inds = page.indicators %}
<input type="button" onclick="log( inds )" value="console">

<form>

  {% for goal in (1..17) %}
    {% assign goal_short_key = goal | append: '-short' %}
    {% assign goal_short = page.t.global_goals[goal_short_key] %}

    {% assign goal_indicators = page.indicators | where: 'sdg_goal', goal  %}
    {% for indicator in goal_indicators %}
      <input type="checkbox" name="report_indicators" value="{{ indicator['indicator_display'] }}">{{ indicator['indicator_sort_order'] }}<br>
    {% endfor %}
  {% endfor %}

  <br>
  <input type="button" onclick="getSelectedIndicators()" value="Erstelle Bericht">
  <br><br>
  <input type="text" id="order" size="50">
</form>


<script src='{{ site.baseurl }}/assets/js/custom.js?v={{ cache_bust }}'></script>

<button onclick="exportUsingJSPDF()">Export Using JSPDF 4.1</button>
<div id="report">
  <div id="cover" class="myDivClass" style="background-color:white">
    <img src="https://dnstestenvironment.github.io/dns-indicators/assets/img/report/cover.PNG" alt="cover" width="565" height="800"/>
  </div>


  {%- for goalreport in goals -%}
    {%- assign goal = goalreport.goal | downcase | sdg_lookup -%}
    {%- assign goal_number = goal.number -%}
    {%- assign goal_short_key = goal_number | append: '-short' -%}
    {%- assign goal_short = page.t.global_goals[goal_short_key] -%}

    {% assign goal_indicators = page.indicators | where: 'sdg_goal', goal.number | group_by: 'target_id' %}
    {% for group in goal_indicators %}
      {% for indicator in group.items %}

        {% assign definition = indicator['dns_indicator_definition'] | replace: "<br>", " " %}
        {% assign  intention = indicator['dns_indicator_intention']  | replace: "<br>", "" | replace '"', "'" %}
        {% assign  content = indicator['content_and_progress']  | replace: "<br>", " " | replace"<i> Text aus dem Indikatorenbericht 2021</i>", "" %}

        <div id="{{indicator[indicator]}}"  class="myDivClass" style="background-color:white">
          <img src="{{ goal.icon }}" alt="{{ goal.short | escape }} - {{ page.t.general.goal }} {{ goal.number }}" width="100" height="100" class="goal-icon-{{ goal.number }} goal-icon-image goal-icon-image-{{ site.goal_image_extension }}"/>
          <h1> {{ goal_short }} </h1>
          <h2> {{ indicator['indicator_display'] }} {{ indicator['national_indicator_available'] }} </h2>
          <div>
            <img src="https://dnstestenvironment.github.io/dns-indicators/assets/img/report/1-1-ab.PNG" alt="{{indicator['indicator']}}" width="400" height="300"/>
          </div>
          <h3>Definition der Indikatoren</h3>
          <span>{{ definition }}</span>
          <hr style="width:50%;text-align:left;margin-left:0">
          <h3>Ziele und Intention der Bundesregierung</h3>
          <p>{{ intention }}</p>
        </div>
        <div id="{{indicator[indicator]}}"  class="myDivClass" style="background-color:white">
          <h3>Inhalt und Entwicklung des Indikators</h3>
          <p>{{ content }}</p>
        </div>
      {% endfor %}
    {% endfor %}
  {% endfor %}

</div>
